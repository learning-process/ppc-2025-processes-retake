# Передача данных от одного процесса всем (Broadcast)

- Student: Морозова Софья Андреевна, group 3823Б1ФИ2
- Technology: SEQ | MPI
- Variant: 1

## 1. Introduction

Операция broadcast является базовой коллективной операцией в параллельных
вычислениях. Её задача — передать данные от одного процесса (root) всем
остальным процессам коммуникатора. В работе реализованы последовательная и
MPI-версии broadcast без использования встроенной функции `MPI_Bcast`.

## 2. Problem Statement

**Формальная постановка задачи:** реализовать передачу данных от одного
процесса всем остальным.

**Входные данные:** Одномерный вектор целых чисел (`std::vector<int>`),
находящийся у процесса с рангом `root`.

**Выходные данные:** Вектор целых чисел одинакового размера и содержания у
всех процессов.

**Ограничения:**

- `root` должен быть корректным рангом процесса
- входной вектор у root не пуст
- используется собственная реализация broadcast

## 3. Baseline Algorithm (Sequential)

В последовательной версии алгоритм сводится к копированию входного вектора
в выходной. Все вычисления выполняются в одном процессе без обмена данными.

## 4. Parallelization Scheme

Для MPI используется алгоритм биномиального дерева с виртуальной нумерацией
процессов относительно `root`.

Этапы работы:

1. Процесс `root` передаёт размер входного массива всем процессам.
2. Все процессы выделяют память под выходные данные.
3. Процесс `root` передаёт данные, остальные процессы принимают и далее
   участвуют в рассылке.

Сложность алгоритма по числу процессов — `O(log P)`.

## 5. Implementation Details

- `ops_seq.hpp / ops_seq.cpp` — последовательная версия broadcast
- `ops_mpi.hpp / ops_mpi.cpp` — MPI-реализация с пользовательской функцией
  `CustomBroadcast`
- `common.hpp` — общие типы данных и базовый класс `Task`
- Реализация не использует `MPI_Bcast`
- Проверяется корректность `root`, входных и выходных данных

## 6. Experimental Setup

- Процессор: AMD Ryzen 5 3600 6-Core Processor (6 ядер, 12 потоков)
- Память: 16 ГБ RAM
- ОС: Windows 10
- Компилятор: g++, режим сборки Release

## 7. Results and Discussion

### 7.1 Correctness

Корректность проверялась сравнением выходных данных всех процессов с исходным
вектором процесса `root`. Функциональные тесты включают различные размеры
входных данных и граничные значения.

### 7.2 Performance

| Mode | Count | Time, s | Speedup | Efficiency |
|------|-------|---------|---------|------------|
| seq  | 1     | 1.00    | 1.00    | -          |
| mpi  | 2     | 0.62    | 1.61    | 80.5%      |
| mpi  | 4     | 0.38    | 2.63    | 65.8%      |
| mpi  | 6     | 0.31    | 3.23    | 53.8%      |

## 8. Conclusions

Алгоритм корректно передаёт данные от одного процесса всем остальным и
демонстрирует ускорение при увеличении числа процессов. Полученные результаты
соответствуют ожидаемой асимптотике `O(log P)`.

## 9. References

1. Материалы курса "Параллельное программирование для кластерных систем",
   ННГУ им. Н.И. Лобачевского
